### 简述一下一个引用对象的生命周期？

1. new创建对象并分配内存
2. 对象初始化
3. 对象操作、使用
4. 资源清理（非托管资源）
5. GC垃圾回收

### GC进行垃圾回收时的主要流程是？

1. 标记：先假设所有对象都是垃圾，根据应用程序根Root遍历堆上的每一个引用对象，生成可达对象图，对于还在使用的对象（可达对象）进行标记（其实就是在对象同步索引块中开启一个标示位）。
2. 清除：针对所有不可达对象进行清除操作，针对普通对象直接回收内存，而对于实现了终结器的对象（实现了析构函数的对象）需要单独回收处理。清除之后，内存就会变得不连续了，就是步骤3的工作了。
3. 压缩：把剩下的对象转移到一个连续的内存，因为这些对象地址变了，还需要把那些Root跟指针的地址修改为移动后的新地址。

### GC在哪些情况下回进行回收工作？

- 内存不足溢出时（0代对象充满时）
- Windwos报告内存不足时，CLR会强制执行垃圾回收
- CLR卸载AppDomian，GC回收所有
- 调用GC.Collect
- 其他情况，如主机拒绝分配内存，物理内存不足，超出短期存活代的存段门限